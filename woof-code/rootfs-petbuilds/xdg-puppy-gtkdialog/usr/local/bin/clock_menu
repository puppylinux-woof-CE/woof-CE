#!/bin/sh

PICPTH=/usr/share/pixmaps/puppy
###### main dialog
export MENU='<window border-width="0" edge="topright">
	<hbox space-expand="true" space-fill="false">
		<menubar has-focus="true">
				<menu label="Clock Menu" image-name="'$PICPTH'/clock.svg" tooltip-text="Press X to Close Menu">
					<menuitem label="Set time/date" image-name="'$PICPTH'/date_time.svg">
						<height>20</height>
						<action>exit:set-time</action>
					</menuitem>
					<menuitem label="Sync time" image-name="'$PICPTH'/clock_interval.svg">
						<height>20</height>
						<action>exit:sync</action>
					</menuitem>
					<menuitem label="Set timezone" image-name="'$PICPTH'/country_timezone.svg">
						<height>20</height>
						<action>exit:timezone</action>
					</menuitem>
					<menuitem label="Calendar" image-name="'$PICPTH'/calendar.svg">
						<height>20</height>
						<action>exit:xcal</action>
					</menuitem>
					<menuitem label="Task sheduler" image-name="'$PICPTH'/clock_alarm.svg">
						<height>20</height>
						<action>exit:sched</action>
					</menuitem>
					<height>20</height>
				</menu>
		</menubar>
		<button tooltip-text="Close Menu" relief="2">
			<input file>/usr/share/pixmaps/puppy/close.svg</input>
			<height>12</height>
			<label>""</label>
			<action type="exit">exit</action>
		</button>	
	</hbox>
</window>'
eval `gtkdialog -p MENU 2>/dev/null`

case $EXIT in
	set-time)set-time-for-puppy ;;
	sync)psync ;;
	timezone)timezone-set ;;
	xcal)minixcal ;;
	sched)pschedule ;;
	*)exit ;;
esac
