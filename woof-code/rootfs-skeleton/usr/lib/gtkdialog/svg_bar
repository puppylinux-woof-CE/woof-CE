#!/bin/bash
#generates bar as a svg-file to stdout
#
#usage:
# svg_bar HEIGHT WIDTH PROGRESS "Text"
#
# HEIGHT and WIDTH are are defined number of pixels
# PROGRESS is defined by percent
#
#Sigmund Berglund, dec 2013
#GPL

COLOR_USED='#006793'
COLOR_TOTAL='#444444'
COLOR_TEXT='#bbbbbb'

#red/green
#COLOR_TOTAL='#E56238' 
#COLOR_USED='#52B162'

echo '<?xml version="1.1" encoding="UTF-8"?>
<svg height="'$1'" width="'$2'">
  <defs>
	<linearGradient id="LGD_02">
	  <stop style="stop-color:'$COLOR_USED';stop-opacity:1" offset="0" />
	  <stop style="stop-color:'$COLOR_USED';stop-opacity:0" offset="1" />
	</linearGradient>
	<linearGradient id="LG_02"
	   x1="'$(($3-3))'" y1="10" x2="'$3'" y2="10"
	   xlink:href="#LGD_02"
	   gradientUnits="userSpaceOnUse" />
  </defs>
  <rect style="fill:'$COLOR_TOTAL';stroke:#111111;stroke-width:3" width="'$2'" height="'$1'" x="0" y="0"/>
  <rect style="fill:url(#LG_02);" width="'$(($2-3))'" height="'$(($1-3))'" x="1.5" y="1.5"/>
  <path style="fill:none;stroke:#ffffff;stroke-width:3" d="M 0,'$1' '$2','$1' M '$2',0 '$2','$1'"/>
  <text
	 style="fill:'$COLOR_TEXT';font-family:Mono;font-size:'$(($1/2))';text-anchor:middle"
	 x="'$(($2/2))'" y="'$(($1*17/24))'">
	'$4'
  </text>
</svg>'
