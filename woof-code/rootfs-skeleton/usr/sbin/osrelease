#!/bin/sh
# https://www.freedesktop.org/software/systemd/man/os-release.html
#
# Usage:
# <script> [/path/to/DISTRO_SPECS]

if [ -f "$1" ] ; then
	OR_FILE="$1"
else
	if [ -f /etc/DISTRO_SPECS ] ; then
		OR_FILE="/etc/DISTRO_SPECS"
	elif [ -f /initrd/DISTRO_SPECS ] ; then
		OR_FILE="/initrd/DISTRO_SPECS"
	fi
fi

if [ -f "$OR_FILE" ] ; then
	echo "Using $OR_FILE as a reference"
else
	echo "Need a Puppy DISTRO_SPECS"
	exit 1
fi

. $OR_FILE

(
  echo 'NAME="'${DISTRO_NAME}'"'
  echo 'PRETTY_NAME="'${DISTRO_NAME}'"'
  echo 'VERSION="'${DISTRO_VERSION}'"'
  echo 'ID="'${DISTRO_BINARY_COMPAT}'"'
  echo 'VERSION_ID="'${DISTRO_FILE_PREFIX}'"'
  echo 'BUILD_ID="'${DISTRO_IDSTRING}'"'
  echo 'HOME_URL="'http://puppylinux.com/'"'
  echo 'BUG_REPORT_URL="'https://github.com/puppylinux-woof-CE/woof-CE'"'
) > /etc/os-release
echo "/etc/os-release has been created"

(
  echo 'DISTRIB_ID="'${DISTRO_NAME}'"'
  echo 'DISTRIB_RELEASE="'${DISTRO_VERSION}'"'
  echo 'DISTRIB_CODENAME="'${DISTRO_BINARY_COMPAT}'"'
  echo 'DISTRIB_DESCRIPTION="'${DISTRO_NAME}'"'
) > /etc/lsb-release
echo "/etc/lsb-release has been created"

### END ###
