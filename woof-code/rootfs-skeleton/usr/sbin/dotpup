#!/bin/sh
#Lesser GPL licence v2 (http://www.fsf.org/licensing/licenses/lgpl.html)
#v3.02 Nov 2007 BK: updated. handle PET pkgs only.
#v3.99 apr2008 BK: run /usr/local/petget/pkg_chooser.sh instead of petget.
#v404 add choice of Universal Installer.
#w015 march 2009 BK: update for Woof.
#110402 added button to choose and install SFS file.
#110813 fixed package-management url.
#110814 01micko: convert script from gtkdialog2 to gtkdialog3+.
#110910 BK: get a syntax error with gtkdialog3 (patriot-e version), bump to gtkdialog4.
#120201 rodin.s: internationalized.

export TEXTDOMAINDIR=/usr/share/locale
export TEXTDOMAIN=dotpup
eval_gettext () {
  local myMESSAGE=$(gettext "$1")
  eval echo \"$myMESSAGE\"
}

. /etc/DISTRO_SPECS

DLG1="
<window title=\"$(gettext 'Install')\">
 <vbox>
   <hbox>
     <pixmap><input file stock=\"gtk-save\"></input>
     </pixmap>
     <text space-fill=\"true\"><label>`gettext \"The word 'install' can mean two different things, either to install additional applications in the current Puppy, or to install Puppy to some other media. Take your pick!\"`</label></text>
   </hbox>
 <notebook labels=\"$(gettext 'Install Puppy')|$(gettext 'Install applications')\")>
 <vbox>
  <text><label>$(gettext 'Puppy can be installed to just about anything, including internal hard drive, USB drive, and Zip/LS120 diskette. If for example you are now running Puppy from live-CD and fancy booting Puppy off a USB Flash drive, this is the right place. There are two tools, the Puppy Universal Installer, and BootFlash -- the first is recommended, BootFlash is your second choice, a specialised tool if you cannot get the computer to boot from a USB drive.')</label></text>
  <text><label>\" \"</label></text>
  <hbox>
   <text><label>$(gettext 'Click button to run the Universal Installer:')</label></text>
   
    <button height-request=\"40\" width-request=\"40\">
     <input file>/usr/local/lib/X11/mini-icons/mini-ray.xpm</input>
     <action>/usr/sbin/puppyinstaller &</action>
     <action>EXIT:14</action>
    </button>
   
  </hbox>
  <hbox>
   <text><label>$(gettext 'Click button to run BootFlash USB installer:')</label></text>
   
    <button height-request=\"40\" width-request=\"40\">
     <input file>/usr/local/lib/X11/mini-icons/mini-ray.xpm</input>
     <action>/usr/sbin/bootflash &</action>
     <action>EXIT:14</action>
    </button>
   
  </hbox>
 </vbox>

 <vbox>
  <text><label>`eval_gettext \"The Puppy Package Manager is a tool for installing and uninstalling packages (applications). There are online repositories of \\\${DISTRO_BINARY_COMPAT} and Puppy packages -- the latter are known as PET packages and are identified by '.pet' on the end of their filename. Note that apart from the official \\\${DISTRO_BINARY_COMPAT} and PET repositories, Puppy enthusiasts have created many PETs at other locations, and all you need to do is download one and click on it to install it.\"`</label></text>

  <hbox>
   <text><label>$(gettext 'Click button for Package Manager introduction webpage:')</label></text>
   <vbox>
    <button height-request=\"28\" width-request=\"28\">
     <input file stock=\"gtk-info\" size=\"6\"></input>
     <width>40</width>
     <action>defaultbrowser http://puppylinux.com/development/package-management.htm & </action>
    </button>
   </vbox>
  </hbox>

  <hbox>
   <text><label>$(gettext 'Click button to run the Puppy Package Manager:')</label></text>
   <vbox>
    <button tooltip-text=\"PET Packages\">
     <input file>/usr/local/apps/ROX-Filer/ROX/MIME/application-pet.png</input>
     <width>20</width>
     <action>/usr/local/petget/pkg_chooser.sh &</action>
     <action>EXIT:14</action>
    </button>
   </vbox>
  </hbox>
  
  <text><label>$(gettext 'The above web link also introduces SFS files. These are application combo-packs, very easy to install and uninstall.')</label></text>
  <hbox>
   <text><label>$(gettext 'Click button to choose an SFS file from the official repo:')</label></text>
   <vbox>
    <button tooltip-text=\"SFS Modular Packages\">
     <input file>/usr/local/apps/ROX-Filer/ROX/MIME/application-x-squashfs-image.png</input>
     <width>20</width>
     <action>/usr/sbin/sfsget &</action>
     <action>EXIT:14</action>
    </button>
   </vbox>
  </hbox>
  
 </vbox>
 </notebook>
 <hbox homogeneous=\"true\">
   <button cancel></button>
 </hbox>
 
 </vbox>
</window>
"

echo "$DLG1" | gtkdialog4 --stdin

###END###
