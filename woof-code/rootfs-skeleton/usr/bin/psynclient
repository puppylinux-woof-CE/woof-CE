#!/bin/bash
#written by mistfire
#synclient gui frontend based from flsynclient

load_config(){

[ ! -e "$HOME/.config/psynclient.conf" ] && exit

SYNP=0

for xorgl in $(ls /var/log/Xorg.*.log 2>/dev/null)
do
 if [ "$(cat "$xorgl" | grep "synaptics" | grep "touchpad found")" != "" ]; then
  SYNP=1
  break
 fi
done

[ $SYNP -eq 0 ] && exit

for line1 in $(cat "$HOME/.config/psynclient.conf")
do
 if [ "$line1" != "" ] && [ "$(echo "$line1" | cut -f 2 -d '=')" != "" ]; then
  echo "$line1"
  synclient "$line1"
 fi
done	
	
}

if [ "$1" == "-l" ]; then
 load_config
 exit
fi

SYNP=0

for xorgl in $(ls /var/log/Xorg.*.log 2>/dev/null)
do
 if [ "$(cat "$xorgl" | grep "synaptics" | grep "touchpad found")" != "" ]; then
  SYNP=1
  break
 fi
done

if [ $SYNP -eq 0 ]; then
/usr/lib/gtkdialog/box_ok "psynclient" error "No Synaptics touchpad found"
exit
fi

make_startup(){
	
echo '[Desktop Entry]
Encoding=UTF-8
Type=Application
NoDisplay=true
Name=psynclient
Exec=psynclient -l' > "$HOME/.config/autostart/psynclient.desktop"	
		
}


boolnum(){

if [ "$1" == "true" ]; then
 echo 1
else
 echo 0
fi 
	
}

numbool(){

if [ $1 -eq 1 ]; then
 echo "true"
else
 echo "false"
fi 
	
}

modeval(){

case "$1" in
0) echo "0-ON";;
1) echo "1-OFF";;
2) echo "2-TAP OFF";;
esac	
	
}

buttonval(){
	
case "$1" in
0) echo "0-disable";;
1) echo "1-left button";;
2) echo "2-center button";;
3) echo "3-right button";;
4) echo "4-up wheel";;
5) echo "5-down wheel";;
6) echo "6-left wheel";;
7) echo "7-right wheel";;
esac
	
}

cscrollval(){
	
case "$1" in
0) echo "0-everywhere";;
1) echo "1-top";;
2) echo "2-top right";;
3) echo "3-right";;
4) echo "4-bottom right";;
5) echo "5-bottom";;
6) echo "6-bottom left";;
7) echo "7-left";;
8) echo "8-top left";;
esac
		
}

getconfig(){
field1="$1"
SYNCONFIGS="$(synclient | sed -e "s#\ ##g")"	
CFG1="$(echo "$SYNCONFIGS" | grep "$field1=" | cut -f 2 -d '=' 2>/dev/null)"	
[ "$CFG1" == "" ] && CFG1=0
echo "$CFG1"
}

 if [ -e "$HOME/.config/autostart/psynclient.desktop" ]; then
  xSTARTUP="true"
 else
  xSTARTUP="false"
 fi


 xRELEASE_SENSITIVITY=$(getconfig "FingerLow")
 xTOUCH_SENSITIVITY=$(getconfig "FingerHigh")
 xPRESS_SENSITIVITY=$(getconfig "FingerPress")
 xCLICK_TIME=$(getconfig "ClickTime")
 xMID_BUTTON_TIME=$(getconfig "EmulateMidButtonTime")
 xTOUCHPAD_MODE=$(modeval $(getconfig "TouchpadOff"))

 xMIN_SPEED=$(getconfig "MinSpeed")
 xMAX_SPEED=$(getconfig "MaxSpeed")
 xACCELERATION=$(getconfig "AccelFactor")
 xONE_FINGER=$(buttonval $(getconfig "TapButton1"))
 xTWO_FINGER=$(buttonval $(getconfig "TapButton2"))
 xTHREE_FINGER=$(buttonval $(getconfig "TapButton3"))
 xTOP_LEFT_CORNER=$(buttonval $(getconfig "LTCornerButton"))
 xTOP_RIGHT_CORNER=$(buttonval $(getconfig "RTCornerButton"))
 xBOTTOM_LEFT_CORNER=$(buttonval $(getconfig "LBCornerButton"))
 xBOTTOM_RIGHT_CORNER=$(buttonval $(getconfig "RBCornerButton"))
 xTAP_TIME=$(getconfig "MaxTapTime")
 xDOUBLE_TAP_TIME=$(getconfig "MaxDoubleTapTime")
 xTAP_MOVE=$(getconfig "MaxTapMove")

 xVSCROLL_DELTA=$(getconfig "VertScrollDelta")
 xHSCROLL_DELTA=$(getconfig "HorizScrollDelta")
 xCIRCULAR_SCROLL=$(numbool $(getconfig "CircularScrolling"))
 xCSCROLL_START=$(cscrollval $(getconfig "CircScrollTrigger"))
 xCSCROLL_DELTA=$(getconfig "CircScrollDelta")
 xVTWO_FINGER_SCROLL=$(numbool $(getconfig "VertTwoFingerScroll"))
 xHTWO_FINGER_SCROLL=$(numbool $(getconfig "HorizTwoFingerScroll"))
 xPALM_DETECTION=$(numbool $(getconfig "PalmDetect"))
 xMIN_PALM_WIDTH=$(getconfig "PalmMinWidth")
 xMIN_PALM_Z=$(getconfig "PalmMinZ")
 xVEDGE_SCROLL=$(numbool $(getconfig "VertEdgeScroll"))
 xHEDGE_SCROLL=$(numbool $(getconfig "HorizEdgeScroll"))
 xUP_DOWN_SCROLL=$(numbool $(getconfig "UpDownScrolling"))
 xLEFT_RIGHT_SCROLL=$(numbool $(getconfig "LeftRightScrolling"))
 xTAP_TIMEOUT=$(getconfig "SingleTapTimeout")
 xFAST_TAPS=$(numbool $(getconfig "FastTaps"))
 xCORNER_COASTING=$(numbool $(getconfig "CornerCoasting"))
 xCLICK_PAD=$(numbool $(getconfig "ClickPad"))
 xTRACK_STICK_SPEED=$(getconfig "TrackstickSpeed")
 xMIN_EDGE_SPEED=$(getconfig "EdgeMotionMinSpeed")
 xMAX_EDGE_SPEED=$(getconfig "EdgeMotionMaxSpeed")
 xEDGE_MOTION=$(numbool $(getconfig "EdgeMotionUseAlways"))
 xCIRCULAR_PAD=$(numbool $(getconfig "CircularPad"))
 xCLICK_PAD_SECONDARY=$(numbool $(getconfig "HasSecondarySoftButtons"))
 xGUEST_MOUSE=$(numbool $(getconfig "GuestMouseOff"))
 xTAP_DRAG=$(numbool $(getconfig "TapAndDragGesture"))
 xLOCKED_DRAG=$(numbool $(getconfig "LockedDrags"))
 xLOCKED_DRAG_TIMEOUT=$(getconfig "LockedDragTimeout")
 

export SYNGUI='
<window title="psynclient-1.1" width-request="398" height-request="430" resizable="false" icon-name="gtk-preferences">
<vbox space-fill="true" space-expand="true">
<vbox space-fill="false" space-expand="false">
<notebook labels="General|Movement|Tapping|Scrolling|Palm" height-request="385" position="1" tab-pos="0">
 <vbox margin="8" space-fill="false" space-expand="false">  
   <hbox space-expand="false" space-fill="false">
    <text><label>Touchpad Mode:</label></text>
    <comboboxtext>
     <variable>TOUCHPAD_MODE</variable>
     <item>0-ON</item>
     <item>1-OFF</item>
     <item>2-TAP OFF</item>
     <default>'${xTOUCHPAD_MODE}'</default>
    </comboboxtext>
   </hbox>
   
    <checkbox>
     <label>Load settings on startup</label>
	 <variable>STARTUP</variable>
	 <default>'${xSTARTUP}'</default>
    </checkbox>
   
    <checkbox>
     <label>Circular Touchpad</label>
	 <default>'${xCIRCULAR_PAD}'</default>
	 <variable>CIRCULAR_PAD</variable>
    </checkbox>
    
     <checkbox>
     <label>Disable Guest Mouse</label>
	 <default>'${xGUEST_MOUSE}'</default>
	 <variable>GUEST_MOUSE</variable>
    </checkbox>
    
    <frame Click Pad>
    <checkbox>
     <label>Enable ClickPad</label>
	 <default>'${xCLICK_PAD}'</default>
	 <variable>CLICK_PAD</variable>
    </checkbox>
    <checkbox>
     <label>Secondary Soft Button</label>
	 <default>'${xCLICK_PAD_SECONDARY}'</default>
	 <variable>CLICK_PAD_SECONDARY</variable>
    </checkbox>
    </frame>
     
    <frame Sensitivity>
   
	<hbox space-expand="true" space-fill="true">
	 <hbox space-expand="false" space-fill="false">
	 <text><label>Touch</label></text>
	 </hbox>
	 <hscale width-request="15" scale-min="0" scale-max="150" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>TOUCH_SENSITIVITY</variable>
		<default>'${xTOUCH_SENSITIVITY}'</default>
	 </hscale>
	</hbox>
	
	<hbox space-expand="true" space-fill="true">
	 <hbox space-expand="false" space-fill="false">
	 <text><label>Release</label></text>
	 </hbox>
	 <hscale width-request="15" scale-min="0" scale-max="150" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>RELEASE_SENSITIVITY</variable>
		<default>'${xRELEASE_SENSITIVITY}'</default>
	 </hscale>
	</hbox>
	
    <hbox space-expand="true" space-fill="true">
    <hbox space-expand="false" space-fill="false">
	 <text><label>Press</label></text>
	</hbox>
	 <hscale width-request="15" scale-min="0" scale-max="500" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>PRESS_SENSITIVITY</variable>
		<default>'${xPRESS_SENSITIVITY}'</default>
	 </hscale>
	</hbox>
	
	</frame>
	
	<frame Timing>
	<hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="false">
		<text><label>Click Time</label></text>
		</hbox>
	 <hscale width-request="15" scale-min="0" scale-max="500" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>CLICK_TIME</variable>
		<default>'${xCLICK_TIME}'</default>
	 </hscale>
	</hbox>
	
	<hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="false">
		<text><label>Middle Button Time</label></text>
		</hbox>
	 <hscale width-request="15" scale-min="0" scale-max="500" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>MID_BUTTON_TIME</variable>
		<default>'${xMID_BUTTON_TIME}'</default>
	 </hscale>
	</hbox>
	</frame>
 </vbox>
 <vbox margin="8">
 
 	<hbox space-expand="false" space-fill="true">
	<text><label>Min Pointer Speed:</label></text>
	 <spinbutton range-min="0" range-max="10" range-step="0.01" range-value="'$xMIN_SPEED'">
		<variable>MIN_SPEED</variable>
	 </spinbutton>
	</hbox>
	
 	<hbox space-expand="false" space-fill="true">
	<text><label>Max Pointer Speed:</label></text>
	 <spinbutton range-min="0" range-max="10" range-step="0.01" range-value="'$xMAX_SPEED'">
		<variable>MAX_SPEED</variable>
	 </spinbutton>
	</hbox>
	
 	<hbox space-expand="false" space-fill="true">
	<text><label>Acceleration:</label></text>
	 <spinbutton range-min="0.0001" range-max="0.0100" range-step="0.0001" range-value="'$xACCELERATION'">
		<variable>ACCELERATION</variable>
	 </spinbutton>
	</hbox>
	
	<hbox space-expand="false" space-fill="true">
	<text><label>Track Stick Speed:</label></text>
	 <spinbutton range-min="0" range-max="10" range-step="0.01" range-value="'$xTRACK_STICK_SPEED'">
		<variable>TRACK_STICK_SPEED</variable>
	 </spinbutton>
	</hbox>
 
 </vbox>
  <vbox margin="8">
  <notebook labels="Buttons|Timing|Drag">
  <vbox margin="8">
    <hbox space-expand="false" space-fill="true">
    <text><label>One Finger:</label></text>
    <comboboxtext>
     <variable>ONE_FINGER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xONE_FINGER}'</default>
    </comboboxtext>
    </hbox>

    <hbox space-expand="false" space-fill="true">
    <text><label>Two Finger:</label></text>
    <comboboxtext>
     <variable>TWO_FINGER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xTWO_FINGER}'</default>
    </comboboxtext>
    </hbox> 
    
    <hbox space-expand="false" space-fill="true">
    <text><label>Three Finger:</label></text>
    <comboboxtext>
     <variable>THREE_FINGER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xTHREE_FINGER}'</default>
    </comboboxtext>
    </hbox>
    
    <hbox space-expand="false" space-fill="true">
    <text><label>Top Left Corner:</label></text>
    <comboboxtext>
     <variable>TOP_LEFT_CORNER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xTOP_LEFT_CORNER}'</default>
    </comboboxtext>
    </hbox>
    
    <hbox space-expand="false" space-fill="true">
    <text><label>Top Right Corner:</label></text>
    <comboboxtext>
     <variable>TOP_RIGHT_CORNER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xTOP_RIGHT_CORNER}'</default>
    </comboboxtext>
    </hbox>
    
    <hbox space-expand="false" space-fill="true">
    <text><label>Bottom Left Corner:</label></text>
    <comboboxtext>
     <variable>BOTTOM_LEFT_CORNER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xBOTTOM_LEFT_CORNER}'</default>
    </comboboxtext>
    </hbox>
    
    <hbox space-expand="false" space-fill="true">
    <text><label>Bottom Right Corner:</label></text>
    <comboboxtext>
     <variable>BOTTOM_RIGHT_CORNER</variable>
     <item>0-disable</item>
     <item>1-left button</item>
     <item>2-center button</item>
     <item>3-right button</item>
     <item>4-up wheel</item>
     <item>5-down wheel</item>
     <item>6-left wheel</item>
     <item>7-right wheel</item>
     <default>'${xBOTTOM_RIGHT_CORNER}'</default>
    </comboboxtext>
    </hbox>   
      
   
  </vbox>
  <vbox margin="8">
  
    <checkbox>
     <label>Fast Taps</label>
	 <default>'${xFAST_TAPS}'</default>
	 <variable>FAST_TAPS</variable>
    </checkbox>
   
   <hbox space-expand="false" space-fill="true">
	<text><label>Tap Time:</label></text>
	 <spinbutton range-min="0" range-max="300" range-step="1" range-value="'$xTAP_TIME'">
		<variable>TAP_TIME</variable>
	 </spinbutton>
	</hbox>
	
   <hbox space-expand="false" space-fill="true">
	<text><label>Double Tap Time:</label></text>
	 <spinbutton range-min="0" range-max="300" range-step="1" range-value="'$xDOUBLE_TAP_TIME'">
		<variable>DOUBLE_TAP_TIME</variable>
	 </spinbutton>
	</hbox>
	
   <hbox space-expand="false" space-fill="true">
	<text><label>Tap Move:</label></text>
	 <spinbutton range-min="0" range-max="300" range-step="1" range-value="'$xTAP_MOVE'">
		<variable>TAP_MOVE</variable>
	 </spinbutton>
	</hbox>
	
   <hbox space-expand="false" space-fill="true">
	<text><label>Single Tap Timeout:</label></text>
	 <spinbutton range-min="0" range-max="300" range-step="1" range-value="'$xTAP_TIMEOUT'">
		<variable>TAP_TIMEOUT</variable>
	 </spinbutton>
	</hbox>

  </vbox>
  <vbox margin="8">
    <checkbox>
     <label>Tap and Drag Gesture</label>
	 <default>'${xTAP_DRAG}'</default>
	 <variable>TAP_DRAG</variable>
    </checkbox>
    
    <checkbox>
     <label>Locked Drag</label>
	 <default>'${xLOCKED_DRAG}'</default>
	 <variable>LOCKED_DRAG</variable>
    </checkbox>
    
   <hbox space-expand="false" space-fill="true">
	<text><label>Locked Drag Timeout:</label></text>
	 <spinbutton range-min="0" range-max="8000" range-step="1" range-value="'$xLOCKED_DRAG_TIMEOUT'">
		<variable>LOCKED_DRAG_TIMEOUT</variable>
	 </spinbutton>
	</hbox>
    
  </vbox>
  </notebook>	
	  
  </vbox>
  <vbox margin="8">
  
   <notebook labels="Linear|Circular|Edge">
   <vbox margin="8">
   
   <frame Two Finger Scrolling>
    <checkbox>
     <label>Vertical</label>
	 <default>'${xVTWO_FINGER_SCROLL}'</default>
	 <variable>VTWO_FINGER_SCROLL</variable>
    </checkbox>
    
    <checkbox>
     <label>Horizontal</label>
	 <default>'${xHTWO_FINGER_SCROLL}'</default>
	 <variable>HTWO_FINGER_SCROLL</variable>
    </checkbox>
   </frame>
    
    <frame Edge Scrolling>
    <checkbox>
     <label>Vertical Edge</label>
	 <default>'${xVEDGE_SCROLL}'</default>
	 <variable>VEDGE_SCROLL</variable>
    </checkbox>
    
    <checkbox>
     <label>Horizontal Edge</label>
	 <default>'${xHEDGE_SCROLL}'</default>
	 <variable>HEDGE_SCROLL</variable>
    </checkbox>
    </frame>
    
    <checkbox>
     <label>Up Down Scrolling</label>
	 <default>'${xUP_DOWN_SCROLL}'</default>
	 <variable>UP_DOWN_SCROLL</variable>
    </checkbox>
    
    <checkbox>
     <label>Left Right Scrolling</label>
	 <default>'${xLEFT_RIGHT_SCROLL}'</default>
	 <variable>LEFT_RIGHT_SCROLL</variable>
    </checkbox>
  
     <checkbox>
     <label>Corner Coasting</label>
	 <default>'${xCORNER_COASTING}'</default>
	 <variable>CORNER_COASTING</variable>
    </checkbox>

    <hbox space-expand="true" space-fill="true">
        <hbox space-expand="false" space-fill="true">
		 <text><label>VScroll Delta</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="10" scale-max="1000" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>VSCROLL_DELTA</variable>
		<default>'${xVSCROLL_DELTA}'</default>
	 </hscale>
	</hbox>
	
	<hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="true">
		<text><label>HScroll Delta</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="10" scale-max="1000" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>HSCROLL_DELTA</variable>
		<default>'${xHSCROLL_DELTA}'</default>
	 </hscale>
	</hbox>
    
    
    </vbox>
    <vbox margin="8">

    <checkbox>
     <label>Enable Circular Scrolling</label>
	 <default>'${xCIRCULAR_SCROLL}'</default>
	 <variable>CIRCULAR_SCROLL</variable>
    </checkbox>
    
    <hbox space-expand="false" space-fill="true">
	<text><label>CScroll Delta:</label></text>
	 <spinbutton range-min="0.01" range-max="5" range-step=".01" range-value="'$xCSCROLL_DELTA'">
		<variable>CSCROLL_DELTA</variable>
	 </spinbutton>
	</hbox>
	
	<hbox space-expand="false" space-fill="true">
    <text><label>CScroll Start:</label></text>
    <comboboxtext>
     <variable>CSCROLL_START</variable>
     <item>0-everywhere</item>
     <item>1-top</item>
     <item>2-top right</item>
     <item>3-right</item>
     <item>4-bottom right</item>
     <item>5-bottom</item>
     <item>6-bottom left</item>
     <item>7-left</item>
     <item>8-top left</item>
     <default>'${xCSCROLL_START}'</default>
    </comboboxtext>
    </hbox>
    </vbox>
    <vbox margin="8">
    
    <checkbox>
     <label>Edge Motion</label>
	 <default>'${xEDGE_MOTION}'</default>
	 <variable>EDGE_MOTION</variable>
    </checkbox>
    <vbox space-expand="false" space-fill="true">
    <hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="true">
		<text><label>Min Edge Speed</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="0" scale-max="300" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>MIN_EDGE_SPEED</variable>
		<default>'${xMIN_EDGE_SPEED}'</default>
	 </hscale>
	</hbox>
  
    <hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="true">
		<text><label>Max Edge Speed</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="0" scale-max="300" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>MAX_EDGE_SPEED</variable>
		<default>'${xMAX_EDGE_SPEED}'</default>
	 </hscale>
	</hbox>
    </vbox>
    </vbox>
    </notebook>
  </vbox>
  <vbox margin="8">
    <checkbox>
     <label>Palm Detection</label>
	 <default>'${xPALM_DETECTION}'</default>
	 <variable>PALM_DETECTION</variable>
    </checkbox>
  
    <vbox space-expand="false">
    <hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="true">
		<text><label>Min Palm Width</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="5" scale-max="20" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>MIN_PALM_WIDTH</variable>
		<default>'${xMIN_PALM_WIDTH}'</default>
	 </hscale>
	</hbox>
  
    <hbox space-expand="true" space-fill="true">
	    <hbox space-expand="false" space-fill="true">
		<text><label>Min Palm Pressure</label></text>
		</hbox>
	    <hscale width-request="15" scale-min="30" scale-max="400" scale-step="1" value-pos="1" digits="0" inverted="false">
		<variable>MIN_PALM_Z</variable>
		<default>'${xMIN_PALM_Z}'</default>
	 </hscale>
	</hbox>
	</vbox>
  
  </vbox>
    
 </notebook>
 </vbox>
<hbox>
 <button ok></button>
 <button cancel></button>
 
</hbox>
</vbox>
</window>
'

RETVAL="$(gtkdialog -cp SYNGUI)"

if [ $? -ne 0 ]; then
exit
fi

[ "$RETVAL" == "" ] && exit

eval $RETVAL

[ "$EXIT" == "abort" ] && exit
[ "$EXIT" == "Cancel" ] && exit

xSETTINGS="FingerLow=$RELEASE_SENSITIVITY
FingerHigh=$TOUCH_SENSITIVITY
FingerPress=$PRESS_SENSITIVITY
MaxTapTime=$TAP_TIME
SingleTapTimeout=$TAP_TIMEOUT
MaxTapMove=$TAP_MOVE
MaxDoubleTapTime=$DOUBLE_TAP_TIME
ClickTime=$CLICK_TIME
EmulateMidButtonTime=$MID_BUTTON_TIME
VertScrollDelta=$VSCROLL_DELTA
HorizScrollDelta=$HSCROLL_DELTA
MinSpeed=$MIN_SPEED
MaxSpeed=$MAX_SPEED
AccelFactor=$ACCELERATION
TouchpadOff=$(echo $TOUCHPAD_MODE | cut -f 1 -d '-')
RTCornerButton=$(echo $TOP_RIGHT_CORNER | cut -f 1 -d '-')
RBCornerButton=$(echo $BOTTOM_RIGHT_CORNER | cut -f 1 -d '-')
LTCornerButton=$(echo $TOP_LEFT_CORNER | cut -f 1 -d '-')
LBCornerButton=$(echo $BOTTOM_LEFT_CORNER | cut -f 1 -d '-')
TapButton1=$(echo $ONE_FINGER | cut -f 1 -d '-')
TapButton2=$(echo $TWO_FINGER | cut -f 1 -d '-')
TapButton3=$(echo $THREE_FINGER | cut -f 1 -d '-')
CircularScrolling=$(boolnum $CIRCULAR_SCROLL)
CircScrollDelta=$CSCROLL_DELTA
CircScrollTrigger=$(echo $CSCROLL_START | cut -f 1 -d '-')
VertTwoFingerScroll=$(boolnum $VTWO_FINGER_SCROLL)
HorizTwoFingerScroll=$(boolnum $HTWO_FINGER_SCROLL)
PalmDetect=$(boolnum $PALM_DETECTION)
PalmMinWidth=$MIN_PALM_WIDTH
PalmMinZ=$MIN_PALM_Z
VertEdgeScroll=$(boolnum $VEDGE_SCROLL)
HorizEdgeScroll=$(boolnum $HEDGE_SCROLL)
UpDownScrolling=$(boolnum $UP_DOWN_SCROLL)
LeftRightScrolling=$(boolnum $LEFT_RIGHT_SCROLL)
FastTaps=$(boolnum $FAST_TAPS)
CornerCoasting=$(boolnum $CORNER_COASTING)
ClickPad=$(boolnum $CLICK_PAD)
TrackstickSpeed=$TRACK_STICK_SPEED
EdgeMotionMinSpeed=$MIN_EDGE_SPEED
EdgeMotionMaxSpeed=$MAX_EDGE_SPEED
EdgeMotionUseAlways=$(boolnum $EDGE_MOTION)
HasSecondarySoftButtons=$(boolnum $CLICK_PAD_SECONDARY)
CircularPad=$(boolnum $CIRCULAR_PAD)
GuestMouseOff=$(boolnum $GUEST_MOUSE)
TapAndDragGesture=$(boolnum $TAP_DRAG)
LockedDrags=$(boolnum $LOCKED_DRAG)
LockedDragTimeout=$(boolnum $LOCKED_DRAG_TIMEOUT)
"


echo "" > "$HOME/.config/psynclient.conf"

xSYNCONFIGS="$(synclient | sed -e "s#\ ##g")"	

for line1 in $xSETTINGS
do
 
 echo "$line1"
 SettingName="$(echo "$line1" | cut -f 1 -d '=')"
 xvalue1="$(echo "$line1" | cut -f 2 -d '=')"
 
 if [ "$(echo "$xSYNCONFIGS" | grep "${SettingName}=")" != "" ]; then
  if [ "$xvalue1" != "" ]; then  
   echo "$line1" >> "$HOME/.config/psynclient.conf"
   synclient "$line1"
  fi
 fi
done

if [ "$STARTUP" == "true" ]; then
 make_startup
else
 rm -f "$HOME/.config/autostart/psynclient.desktop"
fi

